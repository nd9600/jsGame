!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="static/js/",n(n.s=0)}([function(t,e,n){"use strict";var r,o;n.r(e),function(t){t.Character="c",t.Wall="x",t.Empty=" ",t.End="e"}(r||(r={})),function(t){t.NotStarted="NotStarted",t.PlacingWalls="PlacingWalls",t.Playing="Playing",t.Finished="Finished"}(o||(o={}));var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return a(t,null,[{key:"mergeWithOptions",value:function(t,e){return new te(t.id,t.creatorID,e.boardData||t.boardData,e.startPoint||t.startPoint,e.endPoint||t.endPoint,e.status||t.status)}}]),t}();function u(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function c(t){return function e(n){return 0===arguments.length||u(n)?e:t.apply(this,arguments)}}var s=c(function(t){return function(){return t}});function f(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return u(n)?e:c(function(e){return t(n,e)});default:return u(n)&&u(r)?e:u(n)?c(function(e){return t(e,r)}):u(r)?c(function(e){return t(n,e)}):t(n,r)}}}function l(t,e){var n;t=t||[],e=e||[];var r=t.length,o=e.length,a=[];for(n=0;n<r;)a[a.length]=t[n],n+=1;for(n=0;n<o;)a[a.length]=e[n],n+=1;return a}function p(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,a){return e.apply(this,arguments)};case 6:return function(t,n,r,o,a,i){return e.apply(this,arguments)};case 7:return function(t,n,r,o,a,i,u){return e.apply(this,arguments)};case 8:return function(t,n,r,o,a,i,u,c){return e.apply(this,arguments)};case 9:return function(t,n,r,o,a,i,u,c,s){return e.apply(this,arguments)};case 10:return function(t,n,r,o,a,i,u,c,s,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function y(t,e,n){return function(){for(var r=[],o=0,a=t,i=0;i<e.length||o<arguments.length;){var c;i<e.length&&(!u(e[i])||o>=arguments.length)?c=e[i]:(c=arguments[o],o+=1),r[i]=c,u(c)||(a-=1),i+=1}return a<=0?n.apply(this,r):p(a,y(t,r,n))}}var h=f(function(t,e){return 1===t?c(e):p(t,y(t,[],e))});function d(t){return function e(n,r,o){switch(arguments.length){case 0:return e;case 1:return u(n)?e:f(function(e,r){return t(n,e,r)});case 2:return u(n)&&u(r)?e:u(n)?f(function(e,n){return t(e,r,n)}):u(r)?f(function(e,r){return t(n,e,r)}):c(function(e){return t(n,r,e)});default:return u(n)&&u(r)&&u(o)?e:u(n)&&u(r)?f(function(e,n){return t(e,n,o)}):u(n)&&u(o)?f(function(e,n){return t(e,r,n)}):u(r)&&u(o)?f(function(e,r){return t(n,e,r)}):u(n)?c(function(e){return t(e,r,o)}):u(r)?c(function(e){return t(n,e,o)}):u(o)?c(function(e){return t(n,r,e)}):t(n,r,o)}}}var v=d(function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,o=l(n);return o[r]=t(n[r]),o}),b=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function g(t){return"function"==typeof t["@@transducer/step"]}function w(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!b(o)){for(var a=0;a<t.length;){if("function"==typeof o[t[a]])return o[t[a]].apply(o,r);a+=1}if(g(o))return e.apply(null,r)(o)}return n.apply(this,arguments)}}function m(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var O={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},P=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=m(this.xf["@@transducer/step"](t,!1))),t},t}(),j=f(w(["all"],f(function(t,e){return new P(t,e)}),function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0}));function E(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}function _(t){return"[object String]"===Object.prototype.toString.call(t)}var S=c(function(t){return!!b(t)||!!t&&("object"==typeof t&&(!_(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),k=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function C(t){return new k(t)}var x=f(function(t,e){return p(t.length,function(){return t.apply(e,arguments)})});function T(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function D(t,e,n,r){return t["@@transducer/result"](n[r](x(t["@@transducer/step"],t),e))}var I="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function A(t,e,n){if("function"==typeof t&&(t=C(t)),S(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return D(t,e,n,"fantasy-land/reduce");if(null!=n[I])return T(t,e,n[I]());if("function"==typeof n.next)return T(t,e,n);if("function"==typeof n.reduce)return D(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var B=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),M=f(function(t,e){return new B(t,e)});function N(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var W=Object.prototype.toString,R=function(){return"[object Arguments]"===W.call(arguments)?function(t){return"[object Arguments]"===W.call(t)}:function(t){return N("callee",t)}},F=!{toString:null}.propertyIsEnumerable("toString"),U=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(){return arguments.propertyIsEnumerable("length")}(),q=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},z=c("function"!=typeof Object.keys||L?function(t){if(Object(t)!==t)return[];var e,n,r=[],o=L&&R(t);for(e in t)!N(e,t)||o&&"length"===e||(r[r.length]=e);if(F)for(n=U.length-1;n>=0;)N(e=U[n],t)&&!q(r,e)&&(r[r.length]=e),n-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),G=f(w(["fantasy-land/map","map"],M,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return h(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return A(function(n,r){return n[r]=t(e[r]),n},{},z(e));default:return E(t,e)}})),H=f(function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n}),J=f(function(t,e){return H([t],e)}),X=f(function(t,e){return G(J(t),e)}),Y=d(A),Z=f(function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:A(function(t,n){return l(t,G(n,e))},[],t)});var $=f(function(t,e){return l(e,[t])}),K=c(function(t){for(var e=z(t),n=e.length,r=[],o=0;o<n;)r[o]=t[e[o]],o+=1;return r}),Q=d(function(t,e,n){var r={};for(var o in n)r[o]=n[o];return r[t]=e,r}),V=Number.isInteger||function(t){return t<<0===t},tt=c(function(t){return null==t}),et=d(function t(e,n,r){if(0===e.length)return n;var o=e[0];if(e.length>1){var a=!tt(r)&&N(o,r)?r[o]:V(e[1])?[]:{};n=t(Array.prototype.slice.call(e,1),n,a)}if(V(o)&&b(r)){var i=[].concat(r);return i[o]=n,i}return Q(o,n,r)});function nt(t){return"[object Function]"===Object.prototype.toString.call(t)}var rt=f(function(t,e){var n=h(t,e);return h(t,function(){return A(Z,G(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),ot=c(function(t){return rt(t.length,t)}),at=c(function(t){return h(t.length,t)});function it(t){return function e(n){for(var r,o,a,i=[],u=0,c=n.length;u<c;){if(S(n[u]))for(a=0,o=(r=t?e(n[u]):n[u]).length;a<o;)i[i.length]=r[a],a+=1;else i[i.length]=n[u];u+=1}return i}}var ut=c(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});var ct=ot(c(function(t){return!t}));function st(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return b(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}function ft(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function lt(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}var pt=f(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e});function yt(t,e,n,r){var o=ft(t);function a(t,e){return ht(t,e,n.slice(),r.slice())}return!lt(function(t,e){return!lt(a,e,t)},ft(e),o)}function ht(t,e,n,r){if(pt(t,e))return!0;var o=ut(t);if(o!==ut(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!pt(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!pt(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var a=n.length-1;a>=0;){if(n[a]===t)return r[a]===e;a-=1}switch(o){case"Map":return t.size===e.size&&yt(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&yt(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=z(t);if(i.length!==z(e).length)return!1;var u=n.concat([t]),c=r.concat([e]);for(a=i.length-1;a>=0;){var s=i[a];if(!N(s,e)||!ht(e[s],t[s],u,c))return!1;a-=1}return!0}var dt=f(function(t,e){return ht(t,e,[],[])});function vt(t,e,n){var r,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(o=t[n])&&1/o===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(o=t[n])&&o!=o)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(dt(t[n],e))return n;n+=1}return-1}function bt(t,e){return vt(e,t,0)>=0}function gt(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var wt=function(t){return(t<10?"0":"")+t},mt="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+wt(t.getUTCMonth()+1)+"-"+wt(t.getUTCDate())+"T"+wt(t.getUTCHours())+":"+wt(t.getUTCMinutes())+":"+wt(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Ot(t){return function(){return!t.apply(this,arguments)}}function Pt(t,e){for(var n=0,r=e.length,o=[];n<r;)t(e[n])&&(o[o.length]=e[n]),n+=1;return o}function jt(t){return"[object Object]"===Object.prototype.toString.call(t)}var Et=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),_t=f(w(["filter"],f(function(t,e){return new Et(t,e)}),function(t,e){return jt(e)?A(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{},z(e)):Pt(t,e)})),St=f(function(t,e){return _t(Ot(t),e)});var kt=c(function(t){return function t(e,n){var r=function(r){var o=n.concat([e]);return bt(r,o)?"<Circular>":t(r,o)},o=function(t,e){return E(function(e){return gt(e)+": "+r(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+E(r,e).join(", ")+"))";case"[object Array]":return"["+E(r,e).concat(o(e,St(function(t){return/^\d+$/.test(t)},z(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):gt(mt(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":gt(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var a=e.toString();if("[object Object]"!==a)return a}return"{"+o(e,z(e)).join(", ")+"}"}}(t,[])}),Ct=f(bt),xt=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(N(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}(),Tt=y(4,[],w([],y(4,[],function(t,e,n,r){return new xt(t,e,n,r)}),function(t,e,n,r){return A(function(r,o){var a=n(o);return r[a]=t(N(a,r)?r[a]:e,o),r},{},r)})),Dt=f(function(t,e){for(var n=[],r=0,o=t.length;r<o;)bt(t[r],e)||bt(t[r],n)||(n[n.length]=t[r]),r+=1;return n}),It=d(function(t,e,n){return v(s(e),t,n)});var At=f(function(t,e){var n=t<0?e.length+t:t;return _(e)?e.charAt(n):e[n]}),Bt=c(function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():b(t)?[]:_(t)?"":jt(t)?{}:R(t)?function(){return arguments}():void 0}),Mt=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=m(this.xf["@@transducer/step"](t,this.idx))),t},t}(),Nt=f(w([],f(function(t,e){return new Mt(t,e)}),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1})),Wt=c(it(!0)),Rt=f(st("forEach",function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e})),Ft=f(N);function Ut(t){return t}var Lt=Tt(function(t,e){return e},null);var qt="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var a in o)N(a,o)&&(e[a]=o[a]);n+=1}return e},zt=f(function(t,e){var n={};return n[t]=e,n});Array,String,Object;var Gt=f(function(t,e){return h(t+1,function(){var n=arguments[t];if(null!=n&&nt(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(kt(n)+' does not have a method named "'+e+'"')})}),Ht=c(function(t){return null!=t&&dt(t,Bt(t))}),Jt=Gt(1,"join");var Xt=f(function(t,e){return l([t],e)});var Yt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Zt=(String.prototype.trim,d(function(t,e,n){for(var r=[],o=0,a=Math.min(e.length,n.length);o<a;)r[o]=t(e[o],n[o]),o+=1;return r}));function $t(){}var Kt={range:function(t,e){var n=Math.min(t,e),r=Math.max(t,e),o=Array.from({length:r-n},function(t,e){return e+n});return e<t?o.reverse():o},makeError:function(t,e){return{name:t,message:e}},errorHandler:function(t){},assertUnreachable:function(t){throw new Error("Didn't expect to get here")},abyss:$t,countNumberOf:function(t,e){return _t(dt(t),e).length}},Qt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Vt=function(){function t(e,n,a,i,u){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.NotStarted;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.creatorID=n,this.boardData=a,this.startPoint=i,this.endPoint=u,this.status=c,this.getPosition=at(this.uncurriedGetPosition),this.setPosition=at(this.uncurriedSetPosition),this.numberOfRows=this.boardData.length,this.numberOfColumns=At(0,this.boardData).length,this.maxNumberOfWalls=Math.floor(this.numberOfRows*this.numberOfColumns*t.MAX_NUMBER_OF_WALLS_FACTOR),this.currentNumberOfWalls=Kt.countNumberOf(r.Wall,Wt(this.boardData))}return Qt(t,[{key:"boardAsString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n",e=Kt.range(0,this.numberOfRows),n=Kt.range(0,this.numberOfColumns),r=Zt(function(t,e){return Xt(String(t),e)},e,this.boardData),o=G(Jt(" "),r),a=Jt(t,o),i="  "+Jt(" ",n)+"\n";return Jt("",[i,a])}},{key:"getCurrentInfo",value:function(){return"Board #"+this.id+"\nStart point: "+JSON.stringify(this.startPoint)+"\nEnd point: "+JSON.stringify(this.endPoint)+"\nBoard:\n"+this.boardAsString()+"\n"}},{key:"setStartPoint",value:function(t){return i.mergeWithOptions(this,{startPoint:t})}},{key:"setEndPoint",value:function(t){return i.mergeWithOptions(this,{endPoint:t})}},{key:"setStatus",value:function(t){return i.mergeWithOptions(this,{status:t})}},{key:"toggleWallAtPosition",value:function(t){if(this.status!==o.PlacingWalls)return this;if(dt(t,this.startPoint)||dt(t,this.endPoint))return this;var e=this.getPosition(t);return e!==r.Wall&&e!==r.Empty?this:e===r.Wall?this.setPosition(t,r.Empty):this.currentNumberOfWalls<this.maxNumberOfWalls?this.setPosition(t,r.Wall):this}},{key:"uncurriedGetPosition",value:function(t){var e=At(t.y,this.boardData);return At(t.x,e)}},{key:"uncurriedSetPosition",value:function(t,e){var n=At(t.y,this.boardData),r=It(t.x,e,n),o=It(t.y,r,this.boardData);return i.mergeWithOptions(this,{boardData:o})}}]),t}(),te=Vt;Vt.idCounter=0,Vt.MAX_NUMBER_OF_WALLS_FACTOR=.5;var ee=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Event",this.types=[this.type],this.data=e}return ee(t,[{key:"handle",value:function(t){return t}}],[{key:"dispatch",value:function(t,e,n){window.eventBus&&window.eventBus.dispatchToAllListeners(t,e,n)}}]),t}(),re=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function oe(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var ae,ie=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return re(t,null,[{key:"makeInitialBoard",value:function(t){var e=t[0],n=t[1],o=G(s(r.Empty),[].concat(oe(Array(n))));return G(s(o),[].concat(oe(Array(e))))}}]),t}();!function(t){t.Playing="Playing",t.Solved="Solved",t.Finished="Finished"}(ae||(ae={}));var ue=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ce=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.players=e,this.boards=n,this.playerBoards=r;var a=X("status",K(n));Ct(o.NotStarted,a)?this.status=o.NotStarted:j(dt(o.PlacingWalls),a)?this.status=o.PlacingWalls:j(dt(o.Playing),a)?this.status=o.Playing:this.status=o.Finished}return ue(t,[{key:"getPlayerBoard",value:function(t,e){var n=J(t,this.playerBoards);return J(e,n)}},{key:"replacePlayer",value:function(e){return new t(Q(e.id,e,this.players),this.boards,this.playerBoards)}},{key:"replaceBoard",value:function(e){var n=Q(e.id,e,this.boards);return new t(this.players,n,this.playerBoards)}},{key:"replacePlayerBoard",value:function(e){var n=e.playerID,r=e.boardID,o=et([n,r],e,this.playerBoards);return new t(this.players,this.boards,o)}},{key:"getCurrentInfo",value:function(){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=K(this.boards)[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){t=""+t+o.value.getCurrentInfo()+"\n"}}catch(t){n=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw r}}var i=!0,u=!1,c=void 0;try{for(var s,f=K(this.players)[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var l=s.value;t=t+"#####\n"+l.getCurrentInfo()+"\n";var p=J(l.id,this.playerBoards),y=!0,h=!1,d=void 0;try{for(var v,b=K(p)[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){t=""+t+v.value.getCurrentInfo()+"\n"}}catch(t){h=!0,d=t}finally{try{!y&&b.return&&b.return()}finally{if(h)throw d}}}}catch(t){u=!0,c=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}return t}}]),t}(),se=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var fe=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.name=n,this.score=r}return se(t,[{key:"getCurrentInfo",value:function(){return"Player #"+this.id+", "+this.name+", "+this.score+" points\n"}}]),t}(),le=fe;fe.idCounter=0;var pe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ye=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.playerID=e,this.boardID=n,this.characterPosition=r,this.boardStatus=o}return pe(t,[{key:"getCurrentInfo",value:function(){return"Player #"+this.playerID+", Board #"+this.boardID+"\nCharacter position: "+JSON.stringify(this.characterPosition)+"\nBoard Status: "+this.boardStatus+"\n"}}]),t}(),he=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var de=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return he(t,null,[{key:"defaultPlayer",value:function(){return new le(le.idCounter++,"",0)}},{key:"defaultBoard",value:function(e){return new te(te.idCounter++,e,[[]],t.defaultPosition,t.defaultPosition)}},{key:"createGameState",value:function(e){var n=e&&e.players?e.players:[this.defaultPlayer()],r=e&&e.boards?e.boards:[this.defaultBoard(n[0].id)],o=t.createPlayersObject(n),a=t.createBoardsObject(r),i=t.createPlayerBoardsObject(o,a);return new ce(o,a,i)}},{key:"createPlayerBoardsObject",value:function(t,e){var n={},r=!0,a=!1,i=void 0;try{for(var u,c=Object.keys(t)[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var s=u.value,f=Number(s),l={},p=!0,y=!1,h=void 0;try{for(var d,v=Object.keys(e)[Symbol.iterator]();!(p=(d=v.next()).done);p=!0){var b=d.value,g=Number(b),w=J(g,e),m=new ye(f,g,w.startPoint,w.status===o.Finished?ae.Solved:ae.Playing);l[g]=m}}catch(t){y=!0,h=t}finally{try{!p&&v.return&&v.return()}finally{if(y)throw h}}n[f]=l}}catch(t){a=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw i}}return n}},{key:"createBoardsObject",value:function(t){return Lt(function(t){return t.id},t)}},{key:"createPlayersObject",value:function(t){return Lt(function(t){return t.id},t)}}]),t}(),ve=de;de.defaultPosition={x:0,y:0};var be=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ge=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="InitialSetupEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,ne),be(e,[{key:"handle",value:function(t){var e=new le(this.data.playerIDs[0],this.data.initialPlayerName,0),n=new le(this.data.playerIDs[1],this.data.initialPlayerName,0),r=ie.makeInitialBoard(this.data.size),o=new te(this.data.boardIDs[0],e.id,r,this.data.startPoint,this.data.endPoint),a=new te(this.data.boardIDs[1],n.id,r,this.data.startPoint,this.data.endPoint),i=ve.createPlayersObject([e,n]),u=ve.createBoardsObject([o,a]),c=ve.createPlayerBoardsObject(i,u);return new ce(i,u,c)}}]),e}(),we=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var me=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return we(t,[{key:"getInitialPlayerName",value:function(){return""}},{key:"getSize",value:function(){return[4,4]}},{key:"getStartPoint",value:function(){return{x:0,y:0}}},{key:"getEndPoint",value:function(){return{x:3,y:3}}},{key:"getPlayerIDs",value:function(){return[0,1]}},{key:"getBoardIDs",value:function(){return[0,1]}}]),t}(),Oe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Pe,je,Ee=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.unCaughtEvents=[],this.listeners={default:[function(t){e.unCaughtEvents=$(t,e.unCaughtEvents)}]}}return Oe(t,[{key:"addListener",value:function(t,e){var n=void 0;if(Ft(t,this.listeners)){var r=this.listeners[t];n=$(e,r)}else n=[e];this.listeners=Q(t,n,this.listeners)}},{key:"removeListener",value:function(t,e){var n=void 0;if(Ft(t,this.listeners)){var r=this.listeners[t];n=St(ct(dt(e.toString())),r)}else n=[];this.listeners=Q(t,n,this.listeners)}},{key:"dispatch",value:function(t,e){if(Ft(t,this.listeners)){var n=this.listeners[t];Rt(function(t){t(e)},n)}else this.unCaughtEvents=$(e,this.unCaughtEvents)}},{key:"getListeners",value:function(){return this.listeners}},{key:"getUncaughtEvents",value:function(){return this.unCaughtEvents}},{key:"dispatchToAllListeners",value:function(t,e,n){var r=this;window.eventBus&&Rt(function(t){r.dispatch(t,{type:e,data:n})},t)}},{key:"addListenerToMultipleEvents",value:function(t,e){var n=this;Rt(function(t){n.addListener(t,e)},t)}}]),t}();!function(t){t.MoveUp="MoveUp",t.MoveDown="MoveDown",t.MoveLeft="MoveLeft",t.MoveRight="MoveRight"}(Pe||(Pe={})),function(t){t.Up="Up",t.Down="Down",t.Left="Left",t.Right="Right"}(je||(je={}));var _e=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="MovementEvent",n.types=$(n.type,n.types),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,ne),e}(),Se=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ke=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="FailedMovementEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_e),Se(e,[{key:"handle",value:function(t){return Kt.errorHandler(this.data),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handle",this).call(this,t)}}]),e}(),Ce=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var xe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return Ce(t,null,[{key:"mergeWithOptions",value:function(t,e){return new ye(t.playerID,t.boardID,e.characterPosition||t.characterPosition,e.boardStatus||t.boardStatus)}}]),t}(),Te=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var De=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="SuccessfulMovementEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_e),Te(e,[{key:"handle",value:function(t){var e=t.getPlayerBoard(this.data.playerID,this.data.boardID),n=t.boards[this.data.boardID],r=dt(this.data.newCharacterPosition,n.endPoint);return t.replacePlayerBoard(xe.mergeWithOptions(e,{characterPosition:this.data.newCharacterPosition,boardStatus:r?ae.Solved:ae.Playing}))}}]),e}();function Ie(t,e,n){if(Ht(t))return new ke(Kt.makeError("MovementError","no positions to move in to"));var o=Nt(function(t){return dt(e.getPosition(t),r.Wall)},t),a=void 0;return 0===o?new ke(Kt.makeError("MovementError","wall immediately beside")):(a=-1===o?t[t.length-1]:t[o-1],new De({boardID:e.id,playerID:n.playerID,newCharacterPosition:a}))}function Ae(t,e,n){var r=e.characterPosition;switch(n){case je.Up:if(0===r.y)return new ke(Kt.makeError("MovementError","at top of board"));var o=Kt.range(r.y,0);return Ie(G(function(t){return Q("y",t,r)},o),t,e);case je.Down:if(r.y+1===t.numberOfRows)return new ke(Kt.makeError("MovementError","at bottom of board"));var a=Kt.range(r.y+1,t.numberOfRows);return Ie(G(function(t){return Q("y",t,r)},a),t,e);case je.Left:if(0===r.x)return new ke(Kt.makeError("MovementError","at left of board"));var i=Kt.range(r.x,0);return Ie(G(function(t){return Q("x",t,r)},i),t,e);case je.Right:if(r.x+1===t.numberOfColumns)return new ke(Kt.makeError("MovementError","at right of board"));var u=Kt.range(r.x+1,t.numberOfColumns);return Ie(G(function(t){return Q("x",t,r)},u),t,e)}return Kt.assertUnreachable(n)}var Be={getPositionToMoveInto:function(t,e,n){var r=K(t.boards);return G(function(r){return Ae(r,t.getPlayerBoard(e.id,r.id),n)},r)},getPositionToMoveIntoForBoard:Ae};var Me=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="CommandEvent",n.types=$(n.type,n.types),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,ne),e}(),Ne=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var We=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="EndPointChangeEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),Ne(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID].setEndPoint(this.data.newEndPoint);return t.replaceBoard(e)}}]),e}(),Re=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Fe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return Re(t,null,[{key:"mergeWithOptions",value:function(t,e){return new le(t.id,e.name||t.name,e.score||t.score)}}]),t}(),Ue=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Le=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="PlayerNameChangeEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),Ue(e,[{key:"handle",value:function(t){var e=t.players[this.data.playerID],n=Fe.mergeWithOptions(e,{name:this.data.newPlayerName});return t.replacePlayer(n)}}]),e}(),qe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ze=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="SetPlayerBoardStatusToFinishedEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),qe(e,[{key:"handle",value:function(t){var e=t.getPlayerBoard(this.data.playerID,this.data.boardID),n=t.replacePlayerBoard(xe.mergeWithOptions(e,{boardStatus:ae.Finished})),r=!0,o=!0,a=!1,i=void 0;try{for(var u,c=K(n.players)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=J(s.id,n.playerBoards),l=!0,p=!1,y=void 0;try{for(var h,d=K(f)[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value.boardStatus!==ae.Finished&&(r=!1)}}catch(t){p=!0,y=t}finally{try{!l&&d.return&&d.return()}finally{if(p)throw y}}}}catch(t){a=!0,i=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}if(r){var v=z(n.players),b=!0,g=!1,w=void 0;try{for(var m,O=K(n.boards)[Symbol.iterator]();!(b=(m=O.next()).done);b=!0){var P=m.value,j=P.creatorID,E=Number(Dt(v,[String(j)])[0]),_=n.getPlayerBoard(j,P.id).characterPosition===P.endPoint,S=n.getPlayerBoard(E,P.id).characterPosition===P.endPoint,k=_&&!S?10:_&&S?5:0;if(k>0){console.log("hello creator "+j);var C=J(j,n.players);n=n.replacePlayer(Fe.mergeWithOptions(C,{score:C.score+k}))}var x=_&&S?5:!_&&S?20:0;if(x>0){console.log("hello opponent "+E);var T=J(E,n.players);n=n.replacePlayer(Fe.mergeWithOptions(T,{score:T.score+x}))}}}catch(t){g=!0,w=t}finally{try{!b&&O.return&&O.return()}finally{if(g)throw w}}}return n}}]),e}(),Ge=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var He=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="StartPointChangeEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),Ge(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID].setStartPoint(this.data.newStartPoint),n=t.replaceBoard(e),r=!0,o=!1,a=void 0;try{for(var i,u=K(n.players)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value,s=J(c.id,n.playerBoards),f=!0,l=!1,p=void 0;try{for(var y,h=K(s)[Symbol.iterator]();!(f=(y=h.next()).done);f=!0){var d=y.value;dt(d.boardID,this.data.boardID)&&(n=n.replacePlayerBoard(xe.mergeWithOptions(d,{characterPosition:this.data.newStartPoint})))}}catch(t){l=!0,p=t}finally{try{!f&&h.return&&h.return()}finally{if(l)throw p}}}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}}]),e}(),Je=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Xe=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="StatusChangeEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),Je(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID],n=i.mergeWithOptions(e,{status:this.data.newStatus});return t.replaceBoard(n)}}]),e}(),Ye=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Ze=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="ToggleWallEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),Ye(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID].toggleWallAtPosition(this.data.positionToToggle);return t.replaceBoard(e)}}]),e}();var $e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},Ke=$e;$e.handleEvent=function(t,e){return e.handle(t)},$e.makeListOfEvents=function(t){return G(function(t){switch(t.type){case"InitialSetupEvent":return new ge(t.data);case"InputEvent":return new en(t.data);case"FailedMovementEvent":return new ke(t.data);case"MovementEvent":return new _e(t.data);case"SuccessfulMovementEvent":return new De(t.data);case"CommandEvent":return new Me(t.data);case"DirectionEvent":return new Ve(t.data);case"PlayerNameChangeEvent":return new Le(t.data);case"StatusChangeEvent":return new Xe(t.data);case"SetPlayerBoardStatusToFinishedEvent":return new ze(t.data);case"StartPointChangeEvent":return new He(t.data);case"EndPointChangeEvent":return new We(t.data);case"ToggleWallEvent":return new Ze(t.data)}},t)},$e.runEvents=function(t,e){return e=e||ve.createGameState(),Y($e.handleEvent,e,t)};var Qe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Ve=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="DirectionEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Me),Qe(e,[{key:"handle",value:function(t){var e=Be.getPositionToMoveInto(t,this.data.player,this.data.direction);return Ke.runEvents(e,t)}}]),e}(),tn=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var en=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="InputEvent",n.types=$(n.type,n.types),n.data=t,ne.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,ne),tn(e,[{key:"createEvent",value:function(){switch(this.data.command){case Pe.MoveUp:var t={direction:je.Up,player:this.data.player};return new Ve(t);case Pe.MoveDown:var e={direction:je.Down,player:this.data.player};return new Ve(e);case Pe.MoveLeft:var n={direction:je.Left,player:this.data.player};return new Ve(n);case Pe.MoveRight:var r={direction:je.Right,player:this.data.player};return new Ve(r);default:return new ne}}},{key:"handle",value:function(t){return this.createEvent().handle(t)}}]),e}(),nn={ArrowUp:Pe.MoveUp,ArrowDown:Pe.MoveDown,ArrowLeft:Pe.MoveLeft,ArrowRight:Pe.MoveRight},rn=function(t,e){var n=document.getElementById("board"),r=K(t.boards)[0];n.innerHTML="<pre>"+r.boardAsString()+"</pre>";var o=t;window.addEventListener("keyup",function(t){var a=t.code;if(nn.hasOwnProperty(a)){var i={command:nn[a],player:e},u=new en(i);o=u.handle(o),r=K(o.boards)[0],console.log("gameState: ",o),console.log(""),n.innerHTML="<pre>"+r.boardAsString()+"</pre>"}})};window.eventBus=new Ee,window.loggedEvents=[];window.eventBus.addListenerToMultipleEvents(["InitialSetupEvent","InputEvent"],function(t){window.loggedEvents.push(t),console.log("event, data: ",t.data)});var on=new me,an=[on.getInitialPlayerName(),on.getSize(),on.getStartPoint(),on.getEndPoint(),on.getPlayerIDs(),on.getBoardIDs()],un=new ge({initialPlayerName:an[0],size:an[1],startPoint:an[2],endPoint:an[3],playerIDs:an[4],boardIDs:an[5]}).handle(ve.createGameState());rn(un,K(un.players)[0])}]);
//# sourceMappingURL=game.js.map