!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="static/js/",n(n.s=0)}([function(t,e,n){"use strict";var r,o;n.r(e),function(t){t.Character="c",t.Wall="x",t.Empty=" ",t.End="end"}(r||(r={})),function(t){t.NotStarted="NotStarted",t.PlacingWalls="PlacingWalls",t.Playing="Playing",t.Finished="Finished"}(o||(o={}));var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return a(t,null,[{key:"mergeWithOptions",value:function(t,e){return new Vt(t.id,e.player||t.player,e.boardData||t.boardData,e.characterPosition||t.characterPosition,e.endPoint||t.endPoint,e.status||t.status)}}]),t}();function i(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function c(t){return function e(n){return 0===arguments.length||i(n)?e:t.apply(this,arguments)}}var s=c(function(t){return function(){return t}});function f(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return i(n)?e:c(function(e){return t(n,e)});default:return i(n)&&i(r)?e:i(n)?c(function(e){return t(e,r)}):i(r)?c(function(e){return t(n,e)}):t(n,r)}}}function l(t,e){var n;t=t||[],e=e||[];var r=t.length,o=e.length,a=[];for(n=0;n<r;)a[a.length]=t[n],n+=1;for(n=0;n<o;)a[a.length]=e[n],n+=1;return a}function p(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,a){return e.apply(this,arguments)};case 6:return function(t,n,r,o,a,u){return e.apply(this,arguments)};case 7:return function(t,n,r,o,a,u,i){return e.apply(this,arguments)};case 8:return function(t,n,r,o,a,u,i,c){return e.apply(this,arguments)};case 9:return function(t,n,r,o,a,u,i,c,s){return e.apply(this,arguments)};case 10:return function(t,n,r,o,a,u,i,c,s,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function y(t,e,n){return function(){for(var r=[],o=0,a=t,u=0;u<e.length||o<arguments.length;){var c;u<e.length&&(!i(e[u])||o>=arguments.length)?c=e[u]:(c=arguments[o],o+=1),r[u]=c,i(c)||(a-=1),u+=1}return a<=0?n.apply(this,r):p(a,y(t,r,n))}}var h=f(function(t,e){return 1===t?c(e):p(t,y(t,[],e))});function d(t){return function e(n,r,o){switch(arguments.length){case 0:return e;case 1:return i(n)?e:f(function(e,r){return t(n,e,r)});case 2:return i(n)&&i(r)?e:i(n)?f(function(e,n){return t(e,r,n)}):i(r)?f(function(e,r){return t(n,e,r)}):c(function(e){return t(n,r,e)});default:return i(n)&&i(r)&&i(o)?e:i(n)&&i(r)?f(function(e,n){return t(e,n,o)}):i(n)&&i(o)?f(function(e,n){return t(e,r,n)}):i(r)&&i(o)?f(function(e,r){return t(n,e,r)}):i(n)?c(function(e){return t(e,r,o)}):i(r)?c(function(e){return t(n,e,o)}):i(o)?c(function(e){return t(n,r,e)}):t(n,r,o)}}}var v=d(function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,o=l(n);return o[r]=t(n[r]),o}),b=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function g(t){return"function"==typeof t["@@transducer/step"]}function w(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!b(o)){for(var a=0;a<t.length;){if("function"==typeof o[t[a]])return o[t[a]].apply(o,r);a+=1}if(g(o))return e.apply(null,r)(o)}return n.apply(this,arguments)}}function m(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var O={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},j=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=m(this.xf["@@transducer/step"](t,!1))),t},t}(),E=f(w(["all"],f(function(t,e){return new j(t,e)}),function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0}));function P(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}function _(t){return"[object String]"===Object.prototype.toString.call(t)}var S=c(function(t){return!!b(t)||!!t&&("object"==typeof t&&(!_(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),k=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function x(t){return new k(t)}var C=f(function(t,e){return p(t.length,function(){return t.apply(e,arguments)})});function T(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function A(t,e,n,r){return t["@@transducer/result"](n[r](C(t["@@transducer/step"],t),e))}var M="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function N(t,e,n){if("function"==typeof t&&(t=x(t)),S(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return A(t,e,n,"fantasy-land/reduce");if(null!=n[M])return T(t,e,n[M]());if("function"==typeof n.next)return T(t,e,n);if("function"==typeof n.reduce)return A(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var D=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),I=f(function(t,e){return new D(t,e)});function R(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var W=Object.prototype.toString,U=function(){return"[object Arguments]"===W.call(arguments)?function(t){return"[object Arguments]"===W.call(t)}:function(t){return R("callee",t)}},L=!{toString:null}.propertyIsEnumerable("toString"),B=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(){return arguments.propertyIsEnumerable("length")}(),q=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},z=c("function"!=typeof Object.keys||F?function(t){if(Object(t)!==t)return[];var e,n,r=[],o=F&&U(t);for(e in t)!R(e,t)||o&&"length"===e||(r[r.length]=e);if(L)for(n=B.length-1;n>=0;)R(e=B[n],t)&&!q(r,e)&&(r[r.length]=e),n-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),G=f(w(["fantasy-land/map","map"],I,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return h(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return N(function(n,r){return n[r]=t(e[r]),n},{},z(e));default:return P(t,e)}})),H=f(function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n}),X=f(function(t,e){return H([t],e)}),Y=f(function(t,e){return G(X(t),e)}),Z=d(N),$=f(function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:N(function(t,n){return l(t,G(n,e))},[],t)});var J=f(function(t,e){return l(e,[t])}),K=c(function(t){for(var e=z(t),n=e.length,r=[],o=0;o<n;)r[o]=t[e[o]],o+=1;return r}),Q=d(function(t,e,n){var r={};for(var o in n)r[o]=n[o];return r[t]=e,r});Number.isInteger;function V(t){return"[object Function]"===Object.prototype.toString.call(t)}var tt=f(function(t,e){var n=h(t,e);return h(t,function(){return N($,G(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),et=c(function(t){return tt(t.length,t)}),nt=c(function(t){return h(t.length,t)});function rt(t){return function e(n){for(var r,o,a,u=[],i=0,c=n.length;i<c;){if(S(n[i]))for(a=0,o=(r=t?e(n[i]):n[i]).length;a<o;)u[u.length]=r[a],a+=1;else u[u.length]=n[i];i+=1}return u}}var ot=c(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});var at=et(c(function(t){return!t}));function ut(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return b(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}function it(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function ct(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}var st=f(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e});function ft(t,e,n,r){var o=it(t);function a(t,e){return lt(t,e,n.slice(),r.slice())}return!ct(function(t,e){return!ct(a,e,t)},it(e),o)}function lt(t,e,n,r){if(st(t,e))return!0;var o=ot(t);if(o!==ot(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!st(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!st(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var a=n.length-1;a>=0;){if(n[a]===t)return r[a]===e;a-=1}switch(o){case"Map":return t.size===e.size&&ft(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&ft(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=z(t);if(u.length!==z(e).length)return!1;var i=n.concat([t]),c=r.concat([e]);for(a=u.length-1;a>=0;){var s=u[a];if(!R(s,e)||!lt(e[s],t[s],i,c))return!1;a-=1}return!0}var pt=f(function(t,e){return lt(t,e,[],[])});function yt(t,e,n){var r,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(o=t[n])&&1/o===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(o=t[n])&&o!=o)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(pt(t[n],e))return n;n+=1}return-1}function ht(t,e){return yt(e,t,0)>=0}function dt(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var vt=function(t){return(t<10?"0":"")+t},bt="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+vt(t.getUTCMonth()+1)+"-"+vt(t.getUTCDate())+"T"+vt(t.getUTCHours())+":"+vt(t.getUTCMinutes())+":"+vt(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function gt(t){return function(){return!t.apply(this,arguments)}}function wt(t,e){for(var n=0,r=e.length,o=[];n<r;)t(e[n])&&(o[o.length]=e[n]),n+=1;return o}function mt(t){return"[object Object]"===Object.prototype.toString.call(t)}var Ot=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),jt=f(w(["filter"],f(function(t,e){return new Ot(t,e)}),function(t,e){return mt(e)?N(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{},z(e)):wt(t,e)})),Et=f(function(t,e){return jt(gt(t),e)});var Pt=c(function(t){return function t(e,n){var r=function(r){var o=n.concat([e]);return ht(r,o)?"<Circular>":t(r,o)},o=function(t,e){return P(function(e){return dt(e)+": "+r(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+P(r,e).join(", ")+"))";case"[object Array]":return"["+P(r,e).concat(o(e,Et(function(t){return/^\d+$/.test(t)},z(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):dt(bt(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":dt(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var a=e.toString();if("[object Object]"!==a)return a}return"{"+o(e,z(e)).join(", ")+"}"}}(t,[])}),_t=f(ht),St=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(R(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}(),kt=y(4,[],w([],y(4,[],function(t,e,n,r){return new St(t,e,n,r)}),function(t,e,n,r){return N(function(r,o){var a=n(o);return r[a]=t(R(a,r)?r[a]:e,o),r},{},r)})),xt=d(function(t,e,n){return v(s(e),t,n)});var Ct=f(function(t,e){var n=t<0?e.length+t:t;return _(e)?e.charAt(n):e[n]}),Tt=c(function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():b(t)?[]:_(t)?"":mt(t)?{}:U(t)?function(){return arguments}():void 0}),At=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=m(this.xf["@@transducer/step"](t,this.idx))),t},t}(),Mt=f(w([],f(function(t,e){return new At(t,e)}),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1})),Nt=c(rt(!0)),Dt=f(ut("forEach",function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e})),It=f(R);function Rt(t){return t}var Wt=kt(function(t,e){return e},null);var Ut="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var a in o)R(a,o)&&(e[a]=o[a]);n+=1}return e},Lt=f(function(t,e){var n={};return n[t]=e,n});Array,String,Object;var Bt=f(function(t,e){return h(t+1,function(){var n=arguments[t];if(null!=n&&V(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(Pt(n)+' does not have a method named "'+e+'"')})}),Ft=c(function(t){return null!=t&&pt(t,Tt(t))}),qt=Bt(1,"join");function zt(t){return"[object Number]"===Object.prototype.toString.call(t)}var Gt=c(function(t){return null!=t&&zt(t.length)?t.length:NaN});var Ht=f(function(t,e){if(!zt(t)||!zt(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n});var Xt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Yt=(String.prototype.trim,f(function(t,e){for(var n=0,r=Math.min(t.length,e.length),o={};n<r;)o[t[n]]=e[n],n+=1;return o})),Zt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var $t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boards=e;var n=Y("player",K(e));this.players=Yt(Ht(0,Gt(n)),n);var r=Y("status",K(e));_t(o.NotStarted,r)?this.status=o.NotStarted:E(pt(o.PlacingWalls),r)?this.status=o.PlacingWalls:E(pt(o.Playing),r)?this.status=o.Playing:this.status=o.Finished}return Zt(t,[{key:"replaceBoard",value:function(e){return new t(Q(e.id,e,this.boards))}}]),t}(),Jt=function(t){return Wt(function(t){return t.id},t)},Kt={range:function(t,e){var n=Math.min(t,e),r=Math.max(t,e),o=Array.from({length:r-n},function(t,e){return e+n});return e<t?o.reverse():o},makeError:function(t,e){return{name:t,message:e}},errorHandler:function(t){return console.log(t)},assertUnreachable:function(t){throw new Error("Didn't expect to get here")},abyss:function(){},makeBoardsObject:Jt,makeNewGameState:function(){var t={x:0,y:0},e=new Vt(-1,"",[[]],t,t),n=Jt([e]);return new $t(n)},countNumberOf:function(t,e){return jt(pt(t),e).length}};var Qt=function t(e,n,a,i,c){var s=this,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.NotStarted;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.player=n,this.boardData=a,this.characterPosition=i,this.endPoint=c,this.status=f,this.boardAsString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n",e=G(qt(" "),s.boardData);return qt(t,e)},this.setCharacterPosition=function(t){return u.mergeWithOptions(s,{characterPosition:t})},this.setStatus=function(t){return u.mergeWithOptions(s,{status:t})},this.toggleWallAtPosition=function(t){if(s.status!==o.PlacingWalls)return s;var e=s.getPosition(t);return e!==r.Wall&&e!==r.Empty?s:e===r.Wall?s.setPosition(t,r.Empty):s.currentNumberOfWalls<s.maxNumberOfWalls?s.setPosition(t,r.Wall):s},this.uncurriedGetPosition=function(t){var e=Ct(t.y,s.boardData);return Ct(t.x,e)},this.uncurriedSetPosition=function(t,e){var n=Ct(t.y,s.boardData),r=xt(t.x,e,n),o=xt(t.y,r,s.boardData);return u.mergeWithOptions(s,{boardData:o})},this.getPosition=nt(this.uncurriedGetPosition),this.setPosition=nt(this.uncurriedSetPosition),this.numberOfRows=this.boardData.length,this.numberOfColumns=Ct(0,this.boardData).length,this.boardSolved=pt(this.characterPosition,this.endPoint),this.maxNumberOfWalls=Math.floor(this.numberOfRows*this.numberOfColumns*t.MAX_NUMBER_OF_WALLS_FACTOR),this.currentNumberOfWalls=Kt.countNumberOf(r.Wall,Nt(this.boardData))},Vt=Qt;function te(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Qt.idCounter=0,Qt.MAX_NUMBER_OF_WALLS_FACTOR=.5;var ee={makeInitialBoard:function(t,e,n){var o=G(s(r.Empty),[].concat(te(Array(t[0])))),a=G(s(o),[].concat(te(Array(t[1])))),u=Ct(e.y,a),i=xt(e.x,r.Character,u),c=xt(e.y,i,a);return u=Ct(n.y,c),i=xt(n.x,r.End,u),c=xt(n.y,i,c)}},ne=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var re=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Event",this.types=[this.type],this.data=e}return ne(t,[{key:"handle",value:function(t){return t}}],[{key:"dispatch",value:function(t,e,n){window.eventBus&&window.eventBus.dispatchToAllListeners(t,e,n)}}]),t}(),oe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ae=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="InitialSetupEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,re),oe(e,[{key:"handle",value:function(t){var e=ee.makeInitialBoard(this.data.size,this.data.startPoint,this.data.endPoint),n=new Vt(Vt.idCounter++,this.data.initialPlayerName,e,this.data.startPoint,this.data.endPoint),r=Kt.makeBoardsObject([n]);return new $t(r)}}]),e}(),ue=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ie=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return ue(t,[{key:"getInitialPlayerName",value:function(){return""}},{key:"getSize",value:function(){return[4,4]}},{key:"getStartPoint",value:function(){return{x:0,y:0}}},{key:"getEndPoint",value:function(){return{x:3,y:3}}}]),t}(),ce=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var se,fe,le=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.unCaughtEvents=[],this.listeners={default:[function(t){e.unCaughtEvents=J(t,e.unCaughtEvents)}]}}return ce(t,[{key:"addListener",value:function(t,e){var n=void 0;if(It(t,this.listeners)){var r=this.listeners[t];n=J(e,r)}else n=[e];this.listeners=Q(t,n,this.listeners)}},{key:"removeListener",value:function(t,e){var n=void 0;if(It(t,this.listeners)){var r=this.listeners[t];n=Et(at(pt(e.toString())),r)}else n=[];this.listeners=Q(t,n,this.listeners)}},{key:"dispatch",value:function(t,e){if(It(t,this.listeners)){var n=this.listeners[t];Dt(function(t){t(e)},n)}else this.unCaughtEvents=J(e,this.unCaughtEvents)}},{key:"getListeners",value:function(){return this.listeners}},{key:"getUncaughtEvents",value:function(){return this.unCaughtEvents}},{key:"dispatchToAllListeners",value:function(t,e,n){var r=this;window.eventBus&&Dt(function(t){r.dispatch(t,{type:e,data:n})},t)}},{key:"addListenerToMultipleEvents",value:function(t,e){var n=this;Dt(function(t){n.addListener(t,e)},t)}}]),t}();!function(t){t.MoveUp="MoveUp",t.MoveDown="MoveDown",t.MoveLeft="MoveLeft",t.MoveRight="MoveRight"}(se||(se={})),function(t){t.Up="Up",t.Down="Down",t.Left="Left",t.Right="Right"}(fe||(fe={}));var pe=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="MovementEvent",n.types=J(n.type,n.types),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,re),e}(),ye=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var he=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="FailedMovementEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,pe),ye(e,[{key:"handle",value:function(t){return Kt.errorHandler(this.data),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handle",this).call(this,t)}}]),e}(),de=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ve=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="SuccessfulMovementEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,pe),de(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID].setPosition(t.boards[this.data.boardID].characterPosition,r.Empty).setPosition(this.data.newCharacterPosition,r.Character).setCharacterPosition(this.data.newCharacterPosition);return t.replaceBoard(e)}}]),e}();function be(t,e){if(Ft(t))return new he(Kt.makeError("MovementError","no positions to move in to"));var n=Mt(function(t){return pt(e.getPosition(t),r.Wall)},t),o=void 0;return 0===n?new he(Kt.makeError("MovementError","wall immediately beside")):(o=-1===n?t[t.length-1]:t[n-1],new ve({boardID:e.id,newCharacterPosition:o}))}function ge(t,e){var n=t.characterPosition;switch(e){case fe.Up:if(0===n.y)return new he(Kt.makeError("MovementError","at top of board"));var r=Kt.range(n.y,0);return be(G(function(t){return Q("y",t,n)},r),t);case fe.Down:if(n.y+1===t.numberOfRows)return new he(Kt.makeError("MovementError","at bottom of board"));var o=Kt.range(n.y+1,t.numberOfRows);return be(G(function(t){return Q("y",t,n)},o),t);case fe.Left:if(0===n.x)return new he(Kt.makeError("MovementError","at left of board"));var a=Kt.range(n.x,0);return be(G(function(t){return Q("x",t,n)},a),t);case fe.Right:if(n.x+1===t.numberOfColumns)return new he(Kt.makeError("MovementError","at right of board"));var u=Kt.range(n.x+1,t.numberOfColumns);return be(G(function(t){return Q("x",t,n)},u),t)}return Kt.assertUnreachable(e)}var we={getPositionToMoveInto:function(t,e){var n=K(t.boards);return G(function(t){return ge(t,e)},n)},getPositionToMoveIntoForBoard:ge};var me=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="CommandEvent",n.types=J(n.type,n.types),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,re),e}(),Oe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var je=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="PlayerNameChangeEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,me),Oe(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID],n=u.mergeWithOptions(e,{player:this.data.newPlayerName});return t.replaceBoard(n)}}]),e}(),Ee=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Pe=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="StatusChangeEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,me),Ee(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID],n=u.mergeWithOptions(e,{status:this.data.newStatus});return t.replaceBoard(n)}}]),e}(),_e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Se=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="ToggleWallEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,me),_e(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID].toggleWallAtPosition(this.data.positionToToggle);return t.replaceBoard(e)}}]),e}();var ke=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},xe=ke;ke.handleEvent=function(t,e){return e.handle(t)},ke.makeListOfEvents=function(t){return G(function(t){switch(t.type){case"InitialSetupEvent":return new ae(t.data);case"InputEvent":return new Me(t.data);case"FailedMovementEvent":return new he(t.data);case"MovementEvent":return new pe(t.data);case"SuccessfulMovementEvent":return new ve(t.data);case"CommandEvent":return new me(t.data);case"DirectionEvent":return new Te(t.data);case"PlayerNameChangeEvent":return new je(t.data);case"StatusChangeEvent":return new Pe(t.data);case"ToggleWallEvent":return new Se(t.data)}},t)},ke.runEvents=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e=e||Kt.makeNewGameState(),Z(ke.handleEvent,e,t)};var Ce=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Te=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="DirectionEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,me),Ce(e,[{key:"handle",value:function(t){var e=we.getPositionToMoveInto(t,this.data);return xe.runEvents(e,t)}}]),e}(),Ae=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Me=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="InputEvent",n.types=J(n.type,n.types),n.data=t,re.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,re),Ae(e,[{key:"createEvent",value:function(){switch(this.data){case se.MoveUp:return new Te(fe.Up);case se.MoveDown:return new Te(fe.Down);case se.MoveLeft:return new Te(fe.Left);case se.MoveRight:return new Te(fe.Right);default:return new re}}},{key:"handle",value:function(t){return this.createEvent().handle(t)}}]),e}(),Ne={ArrowUp:se.MoveUp,ArrowDown:se.MoveDown,ArrowLeft:se.MoveLeft,ArrowRight:se.MoveRight},De=function(t){var e=document.getElementById("board"),n=K(t.boards)[0];e.innerHTML="<pre>"+n.boardAsString()+"</pre>";var r=t;window.addEventListener("keyup",function(t){var o=t.code;if(Ne.hasOwnProperty(o)){var a=new Me(Ne[o]);r=a.handle(r),n=K(r.boards)[0],console.log(o),console.log(r),console.log(K(r.boards)),console.log(K(r.boards)[0]),console.log("loggedEvents",window.loggedEvents),console.log(""),e.innerHTML="<pre>"+n.boardAsString()+"</pre>"}})};window.eventBus=new le,window.loggedEvents=[];window.eventBus.addListenerToMultipleEvents(["InitialSetupEvent","InputEvent"],function(t){window.loggedEvents.push(t),console.log("event, data: ",t.data)});var Ie=new ie,Re=[Ie.getInitialPlayerName(),Ie.getSize(),Ie.getStartPoint(),Ie.getEndPoint()];De(new ae({initialPlayerName:Re[0],size:Re[1],startPoint:Re[2],endPoint:Re[3]}).handle(Kt.makeNewGameState()))}]);
//# sourceMappingURL=game.js.map