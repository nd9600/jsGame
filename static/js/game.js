!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="static/js/",e(e.s=0)}([function(t,n,e){"use strict";function r(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function o(t){return function n(e){return 0===arguments.length||r(e)?n:t.apply(this,arguments)}}e.r(n);var u=o(function(t){return function(){return t}});function i(t){return function n(e,u){switch(arguments.length){case 0:return n;case 1:return r(e)?n:o(function(n){return t(e,n)});default:return r(e)&&r(u)?n:r(e)?o(function(n){return t(n,u)}):r(u)?o(function(n){return t(e,n)}):t(e,u)}}}function a(t,n){var e;t=t||[],n=n||[];var r=t.length,o=n.length,u=[];for(e=0;e<r;)u[u.length]=t[e],e+=1;for(e=0;e<o;)u[u.length]=n[e],e+=1;return u}function c(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,o){return n.apply(this,arguments)};case 5:return function(t,e,r,o,u){return n.apply(this,arguments)};case 6:return function(t,e,r,o,u,i){return n.apply(this,arguments)};case 7:return function(t,e,r,o,u,i,a){return n.apply(this,arguments)};case 8:return function(t,e,r,o,u,i,a,c){return n.apply(this,arguments)};case 9:return function(t,e,r,o,u,i,a,c,f){return n.apply(this,arguments)};case 10:return function(t,e,r,o,u,i,a,c,f,s){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function f(t,n,e){return function(){for(var o=[],u=0,i=t,a=0;a<n.length||u<arguments.length;){var s;a<n.length&&(!r(n[a])||u>=arguments.length)?s=n[a]:(s=arguments[u],u+=1),o[a]=s,r(s)||(i-=1),a+=1}return i<=0?e.apply(this,o):c(i,f(t,o,e))}}var s=i(function(t,n){return 1===t?o(n):c(t,f(t,[],n))});function l(t){return function n(e,u,a){switch(arguments.length){case 0:return n;case 1:return r(e)?n:i(function(n,r){return t(e,n,r)});case 2:return r(e)&&r(u)?n:r(e)?i(function(n,e){return t(n,u,e)}):r(u)?i(function(n,r){return t(e,n,r)}):o(function(n){return t(e,u,n)});default:return r(e)&&r(u)&&r(a)?n:r(e)&&r(u)?i(function(n,e){return t(n,e,a)}):r(e)&&r(a)?i(function(n,e){return t(n,u,e)}):r(u)&&r(a)?i(function(n,r){return t(e,n,r)}):r(e)?o(function(n){return t(n,u,a)}):r(u)?o(function(n){return t(e,n,a)}):r(a)?o(function(n){return t(e,u,n)}):t(e,u,a)}}}var p=l(function(t,n,e){if(n>=e.length||n<-e.length)return e;var r=(n<0?e.length:0)+n,o=a(e);return o[r]=t(e[r]),o}),y=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function h(t){return"function"==typeof t["@@transducer/step"]}function d(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!y(o)){for(var u=0;u<t.length;){if("function"==typeof o[t[u]])return o[t[u]].apply(o,r);u+=1}if(h(o))return n.apply(null,r)(o)}return e.apply(this,arguments)}}function v(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var b={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function g(t,n){for(var e=0,r=n.length,o=Array(r);e<r;)o[e]=t(n[e]),e+=1;return o}function w(t){return"[object String]"===Object.prototype.toString.call(t)}var m=o(function(t){return!!y(t)||!!t&&("object"==typeof t&&(!w(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),O=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function j(t){return new O(t)}var E=i(function(t,n){return c(t.length,function(){return t.apply(n,arguments)})});function P(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function S(t,n,e,r){return t["@@transducer/result"](e[r](E(t["@@transducer/step"],t),n))}var x="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _(t,n,e){if("function"==typeof t&&(t=j(t)),m(e))return function(t,n,e){for(var r=0,o=e.length;r<o;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return S(t,n,e,"fantasy-land/reduce");if(null!=e[x])return P(t,n,e[x]());if("function"==typeof e.next)return P(t,n,e);if("function"==typeof e.reduce)return S(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}var A=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=b.init,t.prototype["@@transducer/result"]=b.result,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},t}(),C=i(function(t,n){return new A(t,n)});function k(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var T=Object.prototype.toString,D=function(){return"[object Arguments]"===T.call(arguments)?function(t){return"[object Arguments]"===T.call(t)}:function(t){return k("callee",t)}},M=!{toString:null}.propertyIsEnumerable("toString"),U=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(){return arguments.propertyIsEnumerable("length")}(),I=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},R=o("function"!=typeof Object.keys||B?function(t){if(Object(t)!==t)return[];var n,e,r=[],o=B&&D(t);for(n in t)!k(n,t)||o&&"length"===n||(r[r.length]=n);if(M)for(e=U.length-1;e>=0;)k(n=U[e],t)&&!I(r,n)&&(r[r.length]=n),e-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),L=i(d(["fantasy-land/map","map"],C,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return s(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return _(function(e,r){return e[r]=t(n[r]),e},{},R(n));default:return g(t,n)}})),q=i(function(t,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(n):"function"==typeof t?function(e){return t(e)(n(e))}:_(function(t,e){return a(t,L(e,n))},[],t)});var N=i(function(t,n){return a(n,[t])}),F=l(function(t,n,e){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r});Number.isInteger;function z(t){return"[object Function]"===Object.prototype.toString.call(t)}var H=i(function(t,n){var e=s(t,n);return s(t,function(){return _(q,L(e,arguments[0]),Array.prototype.slice.call(arguments,1))})}),G=o(function(t){return H(t.length,t)}),W=o(function(t){return s(t.length,t)});var X=o(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});var Y=G(o(function(t){return!t}));function Z(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return y(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}function $(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function J(t,n,e){for(var r=0,o=e.length;r<o;){if(t(n,e[r]))return!0;r+=1}return!1}var K=i(function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n});function Q(t,n,e,r){var o=$(t);function u(t,n){return V(t,n,e.slice(),r.slice())}return!J(function(t,n){return!J(u,n,t)},$(n),o)}function V(t,n,e,r){if(K(t,n))return!0;var o=X(t);if(o!==X(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var n=String(t).match(/^function (\w*)/);return null==n?"":n[1]}(t.constructor))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!K(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!K(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var u=e.length-1;u>=0;){if(e[u]===t)return r[u]===n;u-=1}switch(o){case"Map":return t.size===n.size&&Q(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&Q(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=R(t);if(i.length!==R(n).length)return!1;var a=e.concat([t]),c=r.concat([n]);for(u=i.length-1;u>=0;){var f=i[u];if(!k(f,n)||!V(n[f],t[f],a,c))return!1;u-=1}return!0}var tt=i(function(t,n){return V(t,n,[],[])});function nt(t,n,e){var r,o;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(o=t[e])&&1/o===r)return e;e+=1}return-1}if(n!=n){for(;e<t.length;){if("number"==typeof(o=t[e])&&o!=o)return e;e+=1}return-1}return t.indexOf(n,e);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(tt(t[e],n))return e;e+=1}return-1}function et(t,n){return nt(n,t,0)>=0}function rt(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ot=function(t){return(t<10?"0":"")+t},ut="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+ot(t.getUTCMonth()+1)+"-"+ot(t.getUTCDate())+"T"+ot(t.getUTCHours())+":"+ot(t.getUTCMinutes())+":"+ot(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function it(t){return function(){return!t.apply(this,arguments)}}function at(t,n){for(var e=0,r=n.length,o=[];e<r;)t(n[e])&&(o[o.length]=n[e]),e+=1;return o}function ct(t){return"[object Object]"===Object.prototype.toString.call(t)}var ft=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=b.init,t.prototype["@@transducer/result"]=b.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},t}(),st=i(d(["filter"],i(function(t,n){return new ft(t,n)}),function(t,n){return ct(n)?_(function(e,r){return t(n[r])&&(e[r]=n[r]),e},{},R(n)):at(t,n)})),lt=i(function(t,n){return st(it(t),n)});var pt=o(function(t){return function t(n,e){var r=function(r){var o=e.concat([n]);return et(r,o)?"<Circular>":t(r,o)},o=function(t,n){return g(function(n){return rt(n)+": "+r(t[n])},n.slice().sort())};switch(Object.prototype.toString.call(n)){case"[object Arguments]":return"(function() { return arguments; }("+g(r,n).join(", ")+"))";case"[object Array]":return"["+g(r,n).concat(o(n,lt(function(t){return/^\d+$/.test(t)},R(n)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof n?"new Boolean("+r(n.valueOf())+")":n.toString();case"[object Date]":return"new Date("+(isNaN(n.valueOf())?r(NaN):rt(ut(n)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof n?"new Number("+r(n.valueOf())+")":1/n==-1/0?"-0":n.toString(10);case"[object String]":return"object"==typeof n?"new String("+r(n.valueOf())+")":rt(n);case"[object Undefined]":return"undefined";default:if("function"==typeof n.toString){var u=n.toString();if("[object Object]"!==u)return u}return"{"+o(n,R(n)).join(", ")+"}"}}(t,[])}),yt=l(function(t,n,e){return p(u(n),t,e)});var ht=i(function(t,n){var e=t<0?n.length+t:t;return w(n)?n.charAt(e):n[e]}),dt=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=b.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.found=!0,t=v(this.xf["@@transducer/step"](t,this.idx))),t},t}(),vt=i(d([],i(function(t,n){return new dt(t,n)}),function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return e;e+=1}return-1})),bt=i(Z("forEach",function(t,n){for(var e=n.length,r=0;r<e;)t(n[r]),r+=1;return n})),gt=i(k);function wt(t){return t}var mt="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1,r=arguments.length;e<r;){var o=arguments[e];if(null!=o)for(var u in o)k(u,o)&&(n[u]=o[u]);e+=1}return n},Ot=i(function(t,n){var e={};return e[t]=n,e});Array,String,Object;var jt=i(function(t,n){return s(t+1,function(){var e=arguments[t];if(null!=e&&z(e[n]))return e[n].apply(e,Array.prototype.slice.call(arguments,0,t));throw new TypeError(pt(e)+' does not have a method named "'+n+'"')})}),Et=jt(1,"join");var Pt,St,xt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";String.prototype.trim;function _t(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}!function(t){t.Character="c",t.Wall="x",t.Empty=" ",t.End="end"}(Pt||(Pt={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(St||(St={}));var At={makeInitialBoard:function(t,n,e){var r=L(u(Pt.Empty),[].concat(_t(Array(t[0])))),o=L(u(r),[].concat(_t(Array(t[1])))),i=ht(n.y,o),a=yt(n.x,Pt.Character,i),c=yt(n.y,a,o);return i=ht(e.y,c),a=yt(e.x,Pt.End,i),c=yt(e.y,a,c)}};var Ct=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=n};var kt=function t(n,e,r,o){var u=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.getBoard=function(){return u.boardData},this.boardAsString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n",n=L(Et(" "),u.boardData);return Et(t,n)},this.setCharacterPosition=function(n){return new t(u.id,u.boardData,n,u.endPoint)},this.uncurriedGetPosition=function(t){u.isPositionOnBoard(t);var n=ht(t.y,u.boardData);return ht(t.x,n)},this.uncurriedSetPosition=function(n,e){u.isPositionOnBoard(n);var r=ht(n.y,u.boardData),o=yt(n.x,e,r),i=yt(n.y,o,u.boardData);return new t(u.id,i,u.characterPosition,u.endPoint)},this.getPosition=W(this.uncurriedGetPosition),this.setPosition=W(this.uncurriedSetPosition),this.isPositionOnBoard=function(t){var n=0<=t.y&&t.y<=u.boardData.length,e=0<=t.x&&t.x<=ht(0,u.boardData).length;if(!n||!e)throw new Error("position "+t+" is off the board")},this.id=n,this.boardData=e,this.characterPosition=r,this.endPoint=o,this.numberOfRows=this.boardData.length,this.numberOfColumns=ht(0,this.boardData).length,this.boardSolved=tt(this.characterPosition,this.endPoint)},Tt=kt;kt.idCounter=0;var Dt=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var Mt=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return Dt(t,[{key:"getSize",value:function(){return[10,10]}},{key:"getStartPoint",value:function(){return{x:0,y:9}}},{key:"getEndPoint",value:function(){return{x:9,y:9}}},{key:"getEmptyGameState",value:function(){return new Ct(new Tt(Tt.idCounter++,[[Pt.Character]],this.getStartPoint(),this.getEndPoint()))}}]),t}(),Ut=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var Bt=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Event",this.types=[this.type],t.dispatch(this.type)}return Ut(t,[{key:"handle",value:function(t){return t}}],[{key:"dispatch",value:function(t,n){window.eventBus&&(void 0!==n?window.eventBus.dispatch(t,{type:t,data:n}):window.eventBus.dispatch(t,{type:t}))}}]),t}(),It={range:function(t,n){var e=Math.min(t,n),r=Math.max(t,n),o=Array.from({length:r-e},function(t,n){return n+e});return n<t?o.reverse():o},makeError:function(t,n){return{name:t,message:n}},errorHandler:function(t){return console.log(t)},assertUnreachable:function(t){throw new Error("Didn't expect to get here")},abyss:function(){}};var Rt=function(t){function n(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.type="MovementEvent",t.types=N(t.type,t.types),Bt.dispatch(t.type),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,Bt),n}(),Lt=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var qt=function(t){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.type="FailedMovementEvent",e.types=N(e.type,e.types),e.data=t,Bt.dispatch(e.type,e.data),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,Rt),Lt(n,[{key:"handle",value:function(t){return It.errorHandler(this.data),function t(n,e,r){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var u=Object.getPrototypeOf(n);return null===u?void 0:t(u,e,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"handle",this).call(this,t)}}]),n}(),Nt=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var Ft=function(t){function n(t,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.type="SuccessfulMovementEvent",r.types=N(r.type,r.types),r.data={boardID:t,newCharacterPosition:e},Bt.dispatch(r.type,r.data),r}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,Rt),Nt(n,[{key:"handle",value:function(t){var n=t.board.setPosition(t.board.characterPosition,Pt.Empty).setPosition(this.data.newCharacterPosition,Pt.Character).setCharacterPosition(this.data.newCharacterPosition);return new Ct(n)}}]),n}();function zt(t,n){var e=vt(function(t){return tt(n.getPosition(t),Pt.Wall)},t),r=void 0;return 0===e?new qt(It.makeError("MovementError","wall immediately beside")):(r=-1===e?t[t.length-1]:t[e-1],new Ft(n.id,r))}var Ht={getPositionToMoveInto:function(t,n){var e=t.board,r=e.characterPosition;switch(n){case St.Up:if(0===r.y)return new qt(It.makeError("MovementError","at top of board"));var o=It.range(r.y,0);return zt(L(function(t){return F("y",t,r)},o),e);case St.Down:if(r.y+1===e.numberOfRows)return new qt(It.makeError("MovementError","at bottom of board"));var u=It.range(r.y+1,e.numberOfRows);return zt(L(function(t){return F("y",t,r)},u),e);case St.Left:if(0===r.x)return new qt(It.makeError("MovementError","at left of board"));var i=It.range(r.x,0);return zt(L(function(t){return F("x",t,r)},i),e);case St.Right:if(r.x+1===e.numberOfColumns)return new qt(It.makeError("MovementError","at right of board"));var a=It.range(r.x+1,e.numberOfColumns);return zt(L(function(t){return F("x",t,r)},a),e)}return It.assertUnreachable(n)}},Gt=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var Wt=function(t){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.type="InputEvent",e.types=N(e.type,e.types),e.data=t,Bt.dispatch(e.type,e.data),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,Bt),Gt(n,[{key:"handle",value:function(t){var n=this.data;return Ht.getPositionToMoveInto(t,n).handle(t)}}]),n}(),Xt=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var Yt=function(){function t(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.unCaughtEvents=[],this.listeners={default:[function(t){n.unCaughtEvents=N(t,n.unCaughtEvents)}]}}return Xt(t,[{key:"addListener",value:function(t,n){var e=void 0;if(gt(t,this.listeners)){var r=this.listeners[t];e=N(n,r)}else e=[n];this.listeners=F(t,e,this.listeners)}},{key:"removeListener",value:function(t,n){var e=void 0;if(gt(t,this.listeners)){var r=this.listeners[t];e=lt(Y(tt(n.toString())),r)}else e=[];this.listeners=F(t,e,this.listeners)}},{key:"dispatch",value:function(t,n){if(gt(t,this.listeners)){var e=this.listeners[t];bt(function(t){t(n)},e)}else this.unCaughtEvents=N(n,this.unCaughtEvents)}},{key:"getListeners",value:function(){return this.listeners}},{key:"getUncaughtEvents",value:function(){return this.unCaughtEvents}}]),t}(),Zt="ArrowUp",$t="ArrowDown",Jt="ArrowLeft",Kt="ArrowRight",Qt=new Mt,Vt=[Qt.getSize(),Qt.getStartPoint(),Qt.getEndPoint()],tn=Vt[0],nn=Vt[1],en=Vt[2],rn=At.makeInitialBoard(tn,nn,en),on=new Tt(Tt.idCounter++,rn,nn,en),un=new Ct(on),an=document.getElementById("board");an.innerHTML="<pre>"+un.board.boardAsString()+"</pre>",window.eventBus=new Yt;var cn=[];window.eventBus.addListener("InputEvent",function(t){cn.push(t),console.log("input, direction: ",t.data)}),window.addEventListener("keyup",function(t){var n=t.code,e={};if(e[Zt]=St.Up,e[$t]=St.Down,e[Jt]=St.Left,e[Kt]=St.Right,e.hasOwnProperty(n)){var r=new Wt(e[n]);un=r.handle(un),console.log(n),console.log(un),console.log(un.board.getBoard()),console.log(cn),console.log(""),an.innerHTML="<pre>"+un.board.boardAsString()+"</pre>"}})}]);
//# sourceMappingURL=game.js.map