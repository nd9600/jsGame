!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="static/js/",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function o(t){return function e(n){return 0===arguments.length||r(n)?e:t.apply(this,arguments)}}n.r(e);var u=o(function(t){return function(){return t}});function i(t){return function e(n,u){switch(arguments.length){case 0:return e;case 1:return r(n)?e:o(function(e){return t(n,e)});default:return r(n)&&r(u)?e:r(n)?o(function(e){return t(e,u)}):r(u)?o(function(e){return t(n,e)}):t(n,u)}}}function a(t,e){var n;t=t||[],e=e||[];var r=t.length,o=e.length,u=[];for(n=0;n<r;)u[u.length]=t[n],n+=1;for(n=0;n<o;)u[u.length]=e[n],n+=1;return u}function c(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,u){return e.apply(this,arguments)};case 6:return function(t,n,r,o,u,i){return e.apply(this,arguments)};case 7:return function(t,n,r,o,u,i,a){return e.apply(this,arguments)};case 8:return function(t,n,r,o,u,i,a,c){return e.apply(this,arguments)};case 9:return function(t,n,r,o,u,i,a,c,f){return e.apply(this,arguments)};case 10:return function(t,n,r,o,u,i,a,c,f,s){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function f(t,e,n){return function(){for(var o=[],u=0,i=t,a=0;a<e.length||u<arguments.length;){var s;a<e.length&&(!r(e[a])||u>=arguments.length)?s=e[a]:(s=arguments[u],u+=1),o[a]=s,r(s)||(i-=1),a+=1}return i<=0?n.apply(this,o):c(i,f(t,o,n))}}var s=i(function(t,e){return 1===t?o(e):c(t,f(t,[],e))});function l(t){return function e(n,u,a){switch(arguments.length){case 0:return e;case 1:return r(n)?e:i(function(e,r){return t(n,e,r)});case 2:return r(n)&&r(u)?e:r(n)?i(function(e,n){return t(e,u,n)}):r(u)?i(function(e,r){return t(n,e,r)}):o(function(e){return t(n,u,e)});default:return r(n)&&r(u)&&r(a)?e:r(n)&&r(u)?i(function(e,n){return t(e,n,a)}):r(n)&&r(a)?i(function(e,n){return t(e,u,n)}):r(u)&&r(a)?i(function(e,r){return t(n,e,r)}):r(n)?o(function(e){return t(e,u,a)}):r(u)?o(function(e){return t(n,e,a)}):r(a)?o(function(e){return t(n,u,e)}):t(n,u,a)}}}var p=l(function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,o=a(n);return o[r]=t(n[r]),o}),y=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function h(t){return"function"==typeof t["@@transducer/step"]}function d(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!y(o)){for(var u=0;u<t.length;){if("function"==typeof o[t[u]])return o[t[u]].apply(o,r);u+=1}if(h(o))return e.apply(null,r)(o)}return n.apply(this,arguments)}}function v(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var b={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function g(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}function w(t){return"[object String]"===Object.prototype.toString.call(t)}var m=o(function(t){return!!y(t)||!!t&&("object"==typeof t&&(!w(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),O=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function j(t){return new O(t)}var E=i(function(t,e){return c(t.length,function(){return t.apply(e,arguments)})});function P(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function _(t,e,n,r){return t["@@transducer/result"](n[r](E(t["@@transducer/step"],t),e))}var S="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function k(t,e,n){if("function"==typeof t&&(t=j(t)),m(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return _(t,e,n,"fantasy-land/reduce");if(null!=n[S])return P(t,e,n[S]());if("function"==typeof n.next)return P(t,e,n);if("function"==typeof n.reduce)return _(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var x=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=b.init,t.prototype["@@transducer/result"]=b.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),C=i(function(t,e){return new x(t,e)});function A(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var M=Object.prototype.toString,T=function(){return"[object Arguments]"===M.call(arguments)?function(t){return"[object Arguments]"===M.call(t)}:function(t){return A("callee",t)}},D=!{toString:null}.propertyIsEnumerable("toString"),I=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(){return arguments.propertyIsEnumerable("length")}(),L=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},R=o("function"!=typeof Object.keys||U?function(t){if(Object(t)!==t)return[];var e,n,r=[],o=U&&T(t);for(e in t)!A(e,t)||o&&"length"===e||(r[r.length]=e);if(D)for(n=I.length-1;n>=0;)A(e=I[n],t)&&!L(r,e)&&(r[r.length]=e),n-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),B=i(d(["fantasy-land/map","map"],C,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return s(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return k(function(n,r){return n[r]=t(e[r]),n},{},R(e));default:return g(t,e)}})),N=l(k),q=i(function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:k(function(t,n){return a(t,B(n,e))},[],t)});var F=i(function(t,e){return a(e,[t])}),z=o(function(t){for(var e=R(t),n=e.length,r=[],o=0;o<n;)r[o]=t[e[o]],o+=1;return r}),G=l(function(t,e,n){var r={};for(var o in n)r[o]=n[o];return r[t]=e,r});Number.isInteger;function H(t){return"[object Function]"===Object.prototype.toString.call(t)}var W=i(function(t,e){var n=s(t,e);return s(t,function(){return k(q,B(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),X=o(function(t){return W(t.length,t)}),Y=o(function(t){return s(t.length,t)});var Z=o(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});var $=X(o(function(t){return!t}));function J(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return y(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}function K(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function Q(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}var V=i(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e});function tt(t,e,n,r){var o=K(t);function u(t,e){return et(t,e,n.slice(),r.slice())}return!Q(function(t,e){return!Q(u,e,t)},K(e),o)}function et(t,e,n,r){if(V(t,e))return!0;var o=Z(t);if(o!==Z(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!V(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!V(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var u=n.length-1;u>=0;){if(n[u]===t)return r[u]===e;u-=1}switch(o){case"Map":return t.size===e.size&&tt(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&tt(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=R(t);if(i.length!==R(e).length)return!1;var a=n.concat([t]),c=r.concat([e]);for(u=i.length-1;u>=0;){var f=i[u];if(!A(f,e)||!et(e[f],t[f],a,c))return!1;u-=1}return!0}var nt=i(function(t,e){return et(t,e,[],[])});function rt(t,e,n){var r,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(o=t[n])&&1/o===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(o=t[n])&&o!=o)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(nt(t[n],e))return n;n+=1}return-1}function ot(t,e){return rt(e,t,0)>=0}function ut(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var it=function(t){return(t<10?"0":"")+t},at="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+it(t.getUTCMonth()+1)+"-"+it(t.getUTCDate())+"T"+it(t.getUTCHours())+":"+it(t.getUTCMinutes())+":"+it(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function ct(t){return function(){return!t.apply(this,arguments)}}function ft(t,e){for(var n=0,r=e.length,o=[];n<r;)t(e[n])&&(o[o.length]=e[n]),n+=1;return o}function st(t){return"[object Object]"===Object.prototype.toString.call(t)}var lt=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=b.init,t.prototype["@@transducer/result"]=b.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),pt=i(d(["filter"],i(function(t,e){return new lt(t,e)}),function(t,e){return st(e)?k(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{},R(e)):ft(t,e)})),yt=i(function(t,e){return pt(ct(t),e)});var ht=o(function(t){return function t(e,n){var r=function(r){var o=n.concat([e]);return ot(r,o)?"<Circular>":t(r,o)},o=function(t,e){return g(function(e){return ut(e)+": "+r(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+g(r,e).join(", ")+"))";case"[object Array]":return"["+g(r,e).concat(o(e,yt(function(t){return/^\d+$/.test(t)},R(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):ut(at(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":ut(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var u=e.toString();if("[object Object]"!==u)return u}return"{"+o(e,R(e)).join(", ")+"}"}}(t,[])}),dt=l(function(t,e,n){return p(u(e),t,n)});var vt=i(function(t,e){var n=t<0?e.length+t:t;return w(e)?e.charAt(n):e[n]}),bt=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=b.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=v(this.xf["@@transducer/step"](t,this.idx))),t},t}(),gt=i(d([],i(function(t,e){return new bt(t,e)}),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1})),wt=i(J("forEach",function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e})),mt=i(A);function Ot(t){return t}var jt="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var u in o)A(u,o)&&(e[u]=o[u]);n+=1}return e},Et=i(function(t,e){var n={};return n[t]=e,n});Array,String,Object;var Pt=i(function(t,e){return s(t+1,function(){var n=arguments[t];if(null!=n&&H(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(ht(n)+' does not have a method named "'+e+'"')})}),_t=Pt(1,"join");var St="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";String.prototype.trim;var kt,xt,Ct,At=function t(e,n,r,o){var u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getBoardData=function(){return u.boardData},this.boardAsString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n",e=B(_t(" "),u.boardData);return _t(t,e)},this.setCharacterPosition=function(e){return new t(u.id,u.boardData,e,u.endPoint)},this.uncurriedGetPosition=function(t){var e=vt(t.y,u.boardData);return vt(t.x,e)},this.uncurriedSetPosition=function(e,n){var r=vt(e.y,u.boardData),o=dt(e.x,n,r),i=dt(e.y,o,u.boardData);return new t(u.id,i,u.characterPosition,u.endPoint)},this.getPosition=Y(this.uncurriedGetPosition),this.setPosition=Y(this.uncurriedSetPosition),this.id=e,this.boardData=n,this.characterPosition=r,this.endPoint=o,this.numberOfRows=this.boardData.length,this.numberOfColumns=vt(0,this.boardData).length,this.boardSolved=nt(this.characterPosition,this.endPoint)},Mt=At;function Tt(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}At.idCounter=0,function(t){t.Character="c",t.Wall="x",t.Empty=" ",t.End="end"}(kt||(kt={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(xt||(xt={})),function(t){t[t.MoveUp=0]="MoveUp",t[t.MoveDown=1]="MoveDown",t[t.MoveLeft=2]="MoveLeft",t[t.MoveRight=3]="MoveRight"}(Ct||(Ct={}));var Dt={makeInitialBoard:function(t,e,n){var r=B(u(kt.Empty),[].concat(Tt(Array(t[0])))),o=B(u(r),[].concat(Tt(Array(t[1])))),i=vt(e.y,o),a=dt(e.x,kt.Character,i),c=dt(e.y,a,o);return i=vt(n.y,c),a=dt(n.x,kt.End,i),c=dt(n.y,a,c)}},It=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Event",this.types=[this.type],this.data=e}return It(t,[{key:"handle",value:function(t){return t}}],[{key:"dispatch",value:function(t,e,n){window.eventBus&&window.eventBus.dispatchToAllListeners(t,e,n)}}]),t}(),Lt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Rt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boards=e}return Lt(t,[{key:"replaceBoard",value:function(e){return new t(G(e.id,e,this.boards))}}]),t}(),Bt=function(t){var e={};return wt(function(t){e=G(t.id,t,e)},t),e},Nt={range:function(t,e){var n=Math.min(t,e),r=Math.max(t,e),o=Array.from({length:r-n},function(t,e){return e+n});return e<t?o.reverse():o},makeError:function(t,e){return{name:t,message:e}},errorHandler:function(t){return console.log(t)},assertUnreachable:function(t){throw new Error("Didn't expect to get here")},abyss:function(){},makeNewGameState:function(){var t={x:0,y:0},e=new Mt(-1,[[]],t,t),n=Bt([e]);return new Rt(n)},makeBoardsObject:Bt},qt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Ft=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="InitialSetupEvent",n.types=F(n.type,n.types),n.data=t,Ut.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Ut),qt(e,[{key:"handle",value:function(t){var e=Dt.makeInitialBoard(this.data.size,this.data.startPoint,this.data.endPoint),n=new Mt(Mt.idCounter++,e,this.data.startPoint,this.data.endPoint),r=Nt.makeBoardsObject([n]);return new Rt(r)}}]),e}(),zt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Gt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return zt(t,[{key:"getSize",value:function(){return[9,9]}},{key:"getStartPoint",value:function(){return{x:0,y:0}}},{key:"getEndPoint",value:function(){return{x:8,y:8}}}]),t}(),Ht=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Wt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.unCaughtEvents=[],this.listeners={default:[function(t){e.unCaughtEvents=F(t,e.unCaughtEvents)}]}}return Ht(t,[{key:"addListener",value:function(t,e){var n=void 0;if(mt(t,this.listeners)){var r=this.listeners[t];n=F(e,r)}else n=[e];this.listeners=G(t,n,this.listeners)}},{key:"removeListener",value:function(t,e){var n=void 0;if(mt(t,this.listeners)){var r=this.listeners[t];n=yt($(nt(e.toString())),r)}else n=[];this.listeners=G(t,n,this.listeners)}},{key:"dispatch",value:function(t,e){if(mt(t,this.listeners)){var n=this.listeners[t];wt(function(t){t(e)},n)}else this.unCaughtEvents=F(e,this.unCaughtEvents)}},{key:"getListeners",value:function(){return this.listeners}},{key:"getUncaughtEvents",value:function(){return this.unCaughtEvents}},{key:"dispatchToAllListeners",value:function(t,e,n){var r=this;window.eventBus&&wt(void 0!==n?function(t){r.dispatch(t,{type:e,data:n})}:function(t){r.dispatch(t,{type:e})},t)}},{key:"addListenerToMultipleEvents",value:function(t,e){var n=this;wt(function(t){n.addListener(t,e)},t)}}]),t}();var Xt=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="MovementEvent",n.types=F(n.type,n.types),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Ut),e}(),Yt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Zt=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="FailedMovementEvent",n.types=F(n.type,n.types),n.data=t,Ut.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Xt),Yt(e,[{key:"handle",value:function(t){return Nt.errorHandler(this.data),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var u=Object.getPrototypeOf(e);return null===u?void 0:t(u,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handle",this).call(this,t)}}]),e}(),$t=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var Jt=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.type="SuccessfulMovementEvent",r.types=F(r.type,r.types),r.data={boardID:t,newCharacterPosition:n},Ut.dispatch(r.types,r.type,r.data),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Xt),$t(e,[{key:"handle",value:function(t){var e=t.boards[this.data.boardID].setPosition(t.boards[this.data.boardID].characterPosition,kt.Empty).setPosition(this.data.newCharacterPosition,kt.Character).setCharacterPosition(this.data.newCharacterPosition);return t.replaceBoard(e)}}]),e}();function Kt(t,e){var n=gt(function(t){return nt(e.getPosition(t),kt.Wall)},t),r=void 0;return 0===n?new Zt(Nt.makeError("MovementError","wall immediately beside")):(r=-1===n?t[t.length-1]:t[n-1],new Jt(e.id,r))}function Qt(t,e){var n=t.characterPosition;switch(e){case xt.Up:if(0===n.y)return new Zt(Nt.makeError("MovementError","at top of board"));var r=Nt.range(n.y,0);return Kt(B(function(t){return G("y",t,n)},r),t);case xt.Down:if(n.y+1===t.numberOfRows)return new Zt(Nt.makeError("MovementError","at bottom of board"));var o=Nt.range(n.y+1,t.numberOfRows);return Kt(B(function(t){return G("y",t,n)},o),t);case xt.Left:if(0===n.x)return new Zt(Nt.makeError("MovementError","at left of board"));var u=Nt.range(n.x,0);return Kt(B(function(t){return G("x",t,n)},u),t);case xt.Right:if(n.x+1===t.numberOfColumns)return new Zt(Nt.makeError("MovementError","at right of board"));var i=Nt.range(n.x+1,t.numberOfColumns);return Kt(B(function(t){return G("x",t,n)},i),t)}return Nt.assertUnreachable(e)}var Vt={getPositionToMoveInto:function(t,e){var n=z(t.boards);return B(function(t){return Qt(t,e)},n)},getPositionToMoveIntoForBoard:Qt};var te=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="CommandEvent",n.types=F(n.type,n.types),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Ut),e}();var ee=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},ne=ee;ee.handleEvent=function(t,e){return e.handle(t)},ee.makeListOfEvents=function(t){return B(function(t){switch(t.type){case"InitialSetupEvent":return new Ft(t.data);case"InputEvent":return new ie(t.data);case"FailedMovementEvent":return new Zt(t.data);case"MovementEvent":return new Xt(t.data);case"SuccessfulMovementEvent":return new Jt(t.data.boardID,t.data.newCharacterPosition);default:return new Ut(t.data)}},t)},ee.runEvents=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e=e||Nt.makeNewGameState(),N(ee.handleEvent,e,t)};var re=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var oe=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="DirectionEvent",n.types=F(n.type,n.types),n.data=t,Ut.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,te),re(e,[{key:"handle",value:function(t){var e=Vt.getPositionToMoveInto(t,this.data);return ne.runEvents(e,t)}}]),e}(),ue=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var ie=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="InputEvent",n.types=F(n.type,n.types),n.data=t,Ut.dispatch(n.types,n.type,n.data),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Ut),ue(e,[{key:"createEvent",value:function(){switch(this.data){case Ct.MoveUp:return new oe(xt.Up);case Ct.MoveDown:return new oe(xt.Down);case Ct.MoveLeft:return new oe(xt.Left);case Ct.MoveRight:return new oe(xt.Right);default:return new Ut}}},{key:"handle",value:function(t){return this.createEvent().handle(t)}}]),e}(),ae={ArrowUp:Ct.MoveUp,ArrowDown:Ct.MoveDown,ArrowLeft:Ct.MoveLeft,ArrowRight:Ct.MoveRight},ce=function(t){var e=document.getElementById("board"),n=z(t.boards)[0];e.innerHTML="<pre>"+n.boardAsString()+"</pre>";var r=t;window.addEventListener("keyup",function(t){var o=t.code;if(ae.hasOwnProperty(o)){var u=new ie(ae[o]);r=u.handle(r),n=z(r.boards)[0],console.log(o),console.log(r),console.log("loggedEvents",window.loggedEvents),console.log(""),e.innerHTML="<pre>"+n.boardAsString()+"</pre>"}})};window.eventBus=new Wt,window.loggedEvents=[];window.eventBus.addListenerToMultipleEvents(["InitialSetupEvent","InputEvent"],function(t){window.loggedEvents.push(t),console.log("event, data: ",t.data)});var fe=new Gt,se=[fe.getSize(),fe.getStartPoint(),fe.getEndPoint()];ce(new Ft({size:se[0],startPoint:se[1],endPoint:se[2]}).handle(Nt.makeNewGameState()))}]);
//# sourceMappingURL=game.js.map